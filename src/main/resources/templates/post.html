<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <title th:text="${post.title}">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞</title>
    <script th:src="@{/js/script.js}" defer></script>
</head>
<body>
<header>
    <h1><a href="/" style="text-decoration: none; color: inherit;">–ë–ª–æ–≥</a></h1>
</header>
<div class="main-content page-container">
    <h2 class="post-title" th:text="${post.title}">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞</h2>
    <img class="post-image" th:src="@{/image/{name}(name=${post.getImageName})}" alt="Image"/>
    <div class="post-content">
        <p th:each="content : ${post.content}" th:text="${content}"></p>
    </div>
    <div class="post-tags">
        <span th:each="tag : ${post.tags}" th:text="${tag}" class="tag"></span>
    </div>
    <div class="post-actions">
        <button class="edit-button" onclick="togglePostForm()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button class="delete-button" th:onclick="deletePost([[${post.id}]])">–£–¥–∞–ª–∏—Ç—å</button>
    </div>

    <!-- –õ–∞–π–∫–∏ -->
    <div class="post-likes">
        <button class="like-button">‚ù§Ô∏è</button>
        <span th:text="${post.likeCount}">0</span> –õ–∞–π–∫–æ–≤
    </div>

    <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
    <div class="comments-section">
        <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
        <ul class="comments-list">
            <li th:each="comment : ${post.comments}" class="comment">
                <span th:text="${comment.content}" class="comment-text"></span>
                <button class="edit-comment-button">‚úèÔ∏è</button>
                <button class="delete-comment-button">üóëÔ∏è</button>
            </li>
        </ul>
        <div class="add-comment">
            <textarea id="newComment" placeholder="–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
            <button class="add-comment-button">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞ -->
    <div id="postForm" class="post-form" style="display: none;">
        <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</h2>
        <form th:action="@{/post/{id}/edit(id=${post.id})}" method="post" th:object="${post}" enctype="multipart/form-data">
            <input type="hidden" name="_method" value="PUT"/>
            <input type="text" name="title" th:field="*{title}" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞" required>
            <input type="file" name="image" accept="image/*">
            <textarea name="content" th:field="*{content}" placeholder="–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞" required></textarea>
            <input type="text" name="tags" th:field="*{tags}" placeholder="–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)" required>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
            <button type="button" onclick="togglePostForm()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </form>
    </div>
</div>

<footer>
    <p>¬© 2025 –ë–ª–æ–≥</p>
</footer>
</body>
</html>